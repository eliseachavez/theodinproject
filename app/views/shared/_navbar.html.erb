<%= render 'shared/off_canvas_menu' %>

<nav class="bg-white mb-8 sm:mb-16 md:mb-20 lg:mb-24">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-3">
    <div class="flex justify-between">
      <div class="flex">
        <div class="flex-shrink-0 flex items-center">
          <%= link_to root_path, class: 'logo' do %>
            <%= image_tag 'icons/odin-icon.svg' , alt: "Odin Logo" , class: 'block lg:hidden h-15 w-auto' %>
          <% end %>

          <%= link_to root_path, class: 'logo' do %>
            <%= image_tag 'logo.svg' , alt: "Odin Logo" , class: 'hidden lg:block h-15 w-auto' %>
          <% end %>
        </div>

      </div>
      <div class="hidden sm:ml-6 sm:flex sm:items-center">
        <% if user_signed_in? %>
          <div class="hidden sm:ml-6 sm:flex sm:space-x-8">
            <%= render Nav::ItemComponent.new(path: paths_url, link_text: 'All Paths') %>
            <%= render Nav::ItemComponent.new(path: chat_link, link_text: 'Community') %>
            <%= render Nav::ItemComponent.new(path: dashboard_path, link_text: 'Dashboard') %>
          </div>

          <%= link_to notifications_path, class: " ml-3 bg-white p-1 rounded-full text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold-500", data: { test_id: 'navbar-notification-icon' } do %>
            <span class="sr-only">View notifications</span>
            <%= inline_svg_tag "icons/bell.svg", class: "h-6 w-6", aria: true, title: "Notifications icon" %>
          <% end %>

          <%= render User::ProfileDropdownComponent.new(current_user: current_user) %>
        <% else %>
          <div class="hidden sm:ml-6 sm:flex sm:space-x-8">
          <%= render Nav::ItemComponent.new(path: paths_url, link_text: 'All Paths') %>
          <%= render Nav::ItemComponent.new(path: about_path, link_text: 'About') %>
          <%= render Nav::ItemComponent.new(path: chat_link, link_text: 'Community') %>
          <%= render Nav::ItemComponent.new(path: sign_up_path, link_text: 'Get Started') %>
          <%= render Nav::ItemComponent.new(path: login_path, link_text: 'Log In') %>
        </div>

        <% end %>
      </div>

      <div class="-mr-2 flex items-center sm:hidden">
        <button type="button" data-controller="custom-events" data-action="custom-events#emit" data-custom-events-event-name-value="openMobileMenu" class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-gold-500" aria-controls="mobile-menu" aria-expanded="false">
          <span class="sr-only">Open mobile menu</span>
          <%= inline_svg_tag "icons/ham-burger.svg", class: "block h-6 w-6", aria: true, title: "Open mobile menu button" %>
        </button>
      </div>
    </div>
  </div>
</nav>
